1) Модифицируйте код клиента и сервера так, чтобы приватный и публичный ключ хранились в текстовых файлах на диске и, таким образом, переиспользовались между запусками.



![Снимок экрана 2021-12-17 в 1 22 43](https://user-images.githubusercontent.com/90418243/146457859-a13318e3-10f7-4219-adee-dfcb9b5bae08.png)




После запуска сервера и клиента в файл history записывается код клиента.

2) Проведите рефакторинг кода клиента и сервера так, чтобы все, относящееся к генерации ключей, установлению режима шифрования, шифрованию исходящих и дешифрованию входящих сообщений было отделено от основного алгоритма обмена сообщениями.



![Снимок экрана 2021-12-17 в 2 26 44](https://user-images.githubusercontent.com/90418243/146463793-e57380d7-a00c-42aa-b406-7a7f8f4dc747.png)



Здесь я внедрил чат, а генерация ключей и настройка происходит на другом потоке.




3) Реализуйте на сервере проверку входящих сертификатов. На сервере должен храниться список разрешенных ключей. Когда клиент посылает на сервер свой публичный ключ, сервер ищет его среди разрешенных и, если такого не находит, разрывает соединение. Проверьте правильность работы не нескольких разных клиентах.



![Снимок экрана 2021-12-15 в 15 12 14](https://user-images.githubusercontent.com/90418243/146458149-14c2bebe-3e3f-4a14-ab87-a780b94b287f.png)



Заранее заполняем список разрешённых ключей, далее мы проверяем на то, что если ключ,который мы передаём есть в нашем списке, то ничего не происходит, в ином случае отключает от сервера клиента.



4) Модифицируйте код клиента и сервера таким образом, чтобы установление режима шифрования происходило при подключении на один порт, а основное общение - на другом порту. Номер порта можно передавать как первое зашифрованное сообщение.
Реализуйте пул портов.



![Снимок экрана 2021-12-17 в 1 26 54](https://user-images.githubusercontent.com/90418243/146458293-3324dcc2-a8b1-4f89-9791-3606adbc7e40.png)



Здесь реалицуется пул портов, мы считываем порт подклюсившегося к серверу и добавляем его в список.
